# FE_Fly（客制化飞行插件）

## 项目状态：D

基于 Paper API 1.21.6+ 开发的 Java 插件，旨在为玩家提供平衡、舒适且可控的限时飞行体验，兼顾趣味性与服务器生态平衡。

### 基本信息
- **插件版本**：1.2.0
- **插件命令**：`/fefly`（别名：`/fly`）
- **作者**：F.windEmiko（狐风轩汐）

### 主要功能
#### 1. 分级权限指令系统
支持指令自动补全，无对应权限则指令不显示，核心子命令设计如下：
- `help`：查询插件所有可用指令帮助（无权限则不显示）
- `info [player]`：查看玩家飞行信息（剩余时间、显示状态、无限飞行状态），默认可查自身，查询他人需`fefly.admin.info`权限
- `time [add/remove/set] [player] [second]`：修改玩家剩余飞行时间，需`fefly.admin.time.*`权限
- `infinite`：启用/关闭无限飞行特权，需`fefly.infinite`权限
- `show [actionbar/bossbar]`：切换飞行剩余时间的显示载体（动作栏/老板栏），需`fefly.show.*`权限
- `reload`：重载插件所有配置文件，需`fefly.admin.reload`权限

#### 2. 动态飞行限制规则
- **战斗坠落机制**：飞行中攻击实体/受到攻击时立即取消飞行并坠落，指定时间后恢复飞行（恢复时长可配置，默认10秒）
- **重锤坠落机制**：飞行时手持重锤会因重量坠落，伴随专属提示消息（是否启用可配置）
- **区域限制机制**：进入WorldGuard标记的禁飞区域立即坠落
- **高度限制机制**：可自定义飞行的最低/最高高度（格数）

#### 3. 多维度配置自定义
- 摔落伤害配置：可分别设置「攻击/受击坠落」「正常取消飞行坠落」是否触发摔落伤害
- 受击豁免配置：可设置是否排除幻翼攻击导致的坠落
- 初始时间配置：自定义新玩家默认拥有的飞行时长
- 调试模式：支持开启debug模式输出详细运行日志
- 占位符格式：可自定义PlaceholderAPI（PAPI）占位符的时间显示格式（如%时%分%秒）

#### 4. 数据与生态兼容
- 双数据库支持：集成MySQL和SQLite，适配不同服务器部署需求
- 跨服数据同步：内置缓存机制，保障跨服场景下数据可靠性与访问性能
- 插件深度集成：对接PlaceholderAPI（占位符）、LuckPerms（权限）、WorldGuard（区域管理）三大核心插件

### 核心占位符支持（PlaceholderAPI）
- `%fefly_time%`：显示玩家剩余飞行时间（格式可自定义）
- `%fefly_status%`：显示玩家当前是否处于飞行状态

### 消息文本自定义
- 独立的`messages.yml`配置文件，全消息文本支持颜色格式化码
- 默认消息采用「简约美观的华丽配色 + 白话文风格」，可全量自定义

### 技术特点
- **开发环境**：Java 21 开发，适配 Paper 1.21.6+ 服务端
- **权限控制**：基于LuckPerms实现精细化权限管理，指令可见性与权限强绑定
- **区域管理**：深度集成WorldGuard，精准识别禁飞区域边界
- **性能优化**：内置数据缓存机制，减少数据库交互频次，提升响应速度
- **兼容性**：全功能适配我的世界Java版1.21.6+，无核心功能冲突